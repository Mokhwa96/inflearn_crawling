[SUMMARY]
- 목표: 인프런 강의 영상 크롤링/저장 확인 및 정상 재생 가능한 파일 생성
- 현재는 한 강의(0번/강의소개)만 대상으로 테스트 진행 중

[CURRENT STATUS]
- 선택한 0번 강의의 m3u8 재생시간은 약 447초(7분 27초)로 계산됨.
  - debug\meta_20260201_185109.m3u8 기준 (segments 59, duration_sec 447.3)
  - 사용자가 기대한 9분짜리 강의는 다른 unitId/인덱스일 가능성이 큼.
- 파일은 .ts로 저장됨 (ts 스트림). mp4는 remux 옵션 사용 시 생성 가능.
  - 저장 위치: C:\src\inflearn\강의소개\0 - 개발자를 위한 컴퓨터공학 1 혼자 공부하는 컴퓨터구조 + 운영체제.ts

[KEY CHANGES]
- 커리큘럼 탭 대기/클릭 및 unit 목록 로딩 대기 로직 추가
- unit_item 외 li[data-unit-id] 기반 URL 추출 보강
- m3u8 처리 개선 (썸네일 제외, master/variant 선택, duration 기반 선택 로그)
- 세그먼트 URL 과인코딩 방지
- AES-128 복호화 처리 추가 (pycryptodome 필요)
- key 요청 보강: seleniumwire 요청 응답 활용, 브라우저 fetch fallback
- 다운로드 제한용 env 옵션 추가
  - INFLEARN_MAX_UNITS, INFLEARN_MAX_SEGMENTS
  - INFLEARN_START_INDEX, INFLEARN_END_INDEX
  - INFLEARN_UNIT_ID
- 저장 방식 변경: 기본 .ts 저장, INFLEARN_REMUX=1일 때 ffmpeg로 mp4 remux

[KNOWN ISSUES]
- 9분짜리 강의가 0번이 아님. unitId 또는 인덱스를 다시 지정해야 함.
- key 요청이 때때로 403 발생. 현재는 브라우저 fetch로 키를 받아오도록 fallback 처리.
- ffmpeg 미설치 상태에서 mp4 변환 불가 (INFLEARN_REMUX=1 사용 시 필요)

[HOW TO RESUME]
1) 원하는 강의 지정
   - 방법 A: INFLEARN_UNIT_ID=XXXX (주소창 unitId 값)
   - 방법 B: INFLEARN_START_INDEX=N / INFLEARN_END_INDEX=N
2) 실행 (예: 0번만)
   - ='0'; ='0'; ='1'; python video_crawler.py
3) mp4가 필요하면 ffmpeg 설치 후
   - ='1'

[FILES TO CHECK]
- video_crawler.py (수정됨)
- .gitignore (debug/, C:/src/inflearn/ 제외 추가)
- debug\master_*.m3u8, debug\meta_*.m3u8 (참고용)

[LAST RUN OUTPUT HIGHLIGHT]
- 0번 강의 선택 시: selected duration 447.3s
- 다운로드/복호화는 동작하며 .ts 저장 완료
